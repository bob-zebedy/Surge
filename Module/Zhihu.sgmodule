#!name=知乎
#!desc=知乎助手

[Rule]
RULE-SET, https://raw.githubusercontent.com/deplives/Surge/master/Provider/Zhihu.list, REJECT


[Map Local]
^https?:\/\/api\.zhihu\.com\/moments\/recent data="https://raw.githubusercontent.com/deplives/Surge/master/Data/blank.json"
^https?:\/\/api\.zhihu\.com\/(notifications\/v\d\/count|v\d\/package|me\/guides|drama\/living-info|ad|fringe|commercial|market\/popovers|search\/(top|tab)|.*featured-comment-ad) data="https://raw.githubusercontent.com/deplives/Surge/master/Data/blank.json"


[Script]
知乎 用户信息 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/people\/,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 信息流 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/(moments|topstory)(\/|\?)?(recommend|action=|feed_type=)(?!\/people),script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 黑名单 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/settings\/blocked_users,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 回答黑名单 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/v4\/questions,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 官方消息 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/notifications\/v3\/(message\?|timeline\/entry\/system_message),script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 关键词去广告 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/api\.zhihu\.com\/search\/preset_words\?,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 优化回答内容 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/www\.zhihu\.com\/appview\/v2\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))?,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js
知乎 优化软件配置 = type=http-response,requires-body=true,max-size=false,pattern=^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config,script-path=https://raw.githubusercontent.com/deplives/Surge/master/Script/Zhihu.js


[MITM]
hostname = %APPEND% www.zhihu.com, api.zhihu.com, zhuanlan.zhihu.com, appcloud2.zhihu.com